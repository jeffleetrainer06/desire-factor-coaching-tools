<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Desire Factor - Week 1: Desire Mapping Journey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 50%, #F59E0B 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: sparkle 20s linear infinite;
        }

        @keyframes sparkle {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .progress-container {
            padding: 30px;
            background: linear-gradient(90deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6, #EC4899);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .progress-text {
            text-align: center;
            color: #4a5568;
            font-weight: 600;
        }

        .main-content {
            padding: 40px;
        }

        .intro-section {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #fef7ff 0%, #f3e8ff 100%);
            border-radius: 15px;
            border-left: 5px solid #8B5CF6;
        }

        .intro-section h2 {
            color: #7c3aed;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .intro-section p {
            color: #4a5568;
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .category-container {
            display: none;
            animation: fadeInUp 0.6s ease-out;
        }

        .category-container.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .category-header {
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .category-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .category-description {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .questions-grid {
            display: grid;
            gap: 25px;
            margin-bottom: 30px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #8B5CF6;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .question-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1rem;
            line-height: 1.4;
        }

        .question-textarea {
            width: 100%;
            min-height: 120px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            font-size: 1rem;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .question-textarea:focus {
            outline: none;
            border-color: #8B5CF6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }

        .btn-secondary {
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-container {
            display: none;
            padding: 40px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 15px;
            margin-top: 30px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            color: #0369a1;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .desire-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .summary-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-top: 4px solid;
        }

        .summary-card:nth-child(1) { border-top-color: #ef4444; }
        .summary-card:nth-child(2) { border-top-color: #f59e0b; }
        .summary-card:nth-child(3) { border-top-color: #10b981; }
        .summary-card:nth-child(4) { border-top-color: #3b82f6; }
        .summary-card:nth-child(5) { border-top-color: #8b5cf6; }
        .summary-card:nth-child(6) { border-top-color: #ec4899; }

        .summary-icon {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .summary-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1a202c;
        }

        .desire-list {
            list-style: none;
        }

        .desire-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            color: #4a5568;
            line-height: 1.4;
        }

        .desire-list li:last-child {
            border-bottom: none;
        }

        .download-section {
            text-align: center;
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #fef7ff 0%, #f3e8ff 100%);
            border-radius: 15px;
        }

        .download-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .questions-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
        }

        .completion-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e2e8f0;
            transition: background 0.3s ease;
        }

        .indicator-dot.completed {
            background: #10b981;
        }

        .indicator-dot.current {
            background: #8B5CF6;
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 10px;">
                    The Desire Factor Coaching Program • Week 1
                </div>
                <div style="font-size: 0.8rem; opacity: 0.8;">
                    mindfulmotivation.net
                </div>
            </div>
            <h1>✨ Your Desire Mapping Journey ✨</h1>
            <p>Discover what your heart truly wants across all areas of your life</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Getting Started...</div>
            <div class="completion-indicator" id="completionIndicator">
                <div class="indicator-dot current"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
                <div class="indicator-dot"></div>
            </div>
        </div>

        <div class="main-content">
            <div class="intro-section" id="introSection">
                <h2>Welcome to Your Transformation Journey</h2>
                <p>You're about to embark on a powerful journey of self-discovery. This comprehensive desire mapping process will help you identify what truly matters to you across six key areas of life. Take your time with each section, be honest with yourself, and let your authentic desires emerge.</p>
                <br>
                <p><strong>Remember:</strong> There are no wrong answers. Your desires are sacred gifts from your Divine Self, pointing you toward your highest expression and greatest joy.</p>
                <div style="margin-top: 30px;">
                    <button class="btn btn-primary" onclick="startMapping()">
                        Begin Your Desire Map ✨
                    </button>
                </div>
            </div>

            <!-- Category Sections -->
            <div class="category-container" id="category-0">
                <div class="category-header">
                    <div class="category-icon">💫</div>
                    <div class="category-title">Well-Being & Body Desires</div>
                    <div class="category-description">How you want to feel physically, mentally, and energetically each day</div>
                </div>
                <div class="questions-grid">
                    <div class="question-card">
                        <label class="question-label">How do I want to feel physically each day?</label>
                        <textarea class="question-textarea" data-category="0" data-question="0" placeholder="Describe your ideal physical state - energy levels, strength, vitality..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What would my ideal body, health, or energy level look like?</label>
                        <textarea class="question-textarea" data-category="0" data-question="1" placeholder="Paint a picture of your healthiest, most vibrant self..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What kind of daily routines, nutrition, or movement would feel nourishing and joyful to me?</label>
                        <textarea class="question-textarea" data-category="0" data-question="2" placeholder="Describe routines that would make you feel amazing..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How do I want to look in the mirror and feel in my clothes?</label>
                        <textarea class="question-textarea" data-category="0" data-question="3" placeholder="Express how you want to feel about your physical appearance..."></textarea>
                    </div>
                </div>
            </div>

            <div class="category-container" id="category-1">
                <div class="category-header">
                    <div class="category-icon">💰</div>
                    <div class="category-title">Financial Desires</div>
                    <div class="category-description">Your relationship with money, abundance, and financial freedom</div>
                </div>
                <div class="questions-grid">
                    <div class="question-card">
                        <label class="question-label">What amount of money would feel abundant and secure for me right now?</label>
                        <textarea class="question-textarea" data-category="1" data-question="0" placeholder="Be specific about numbers and what they would provide..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How would I love to earn, save, invest, or spend money?</label>
                        <textarea class="question-textarea" data-category="1" data-question="1" placeholder="Describe your ideal relationship with money flow..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What kinds of experiences, things, or freedoms would I love my money to provide?</label>
                        <textarea class="question-textarea" data-category="1" data-question="2" placeholder="What would financial abundance make possible in your life?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How would financial flow make me feel?</label>
                        <textarea class="question-textarea" data-category="1" data-question="3" placeholder="Explore the emotions and feelings of financial freedom..."></textarea>
                    </div>
                </div>
            </div>

            <div class="category-container" id="category-2">
                <div class="category-header">
                    <div class="category-icon">🚀</div>
                    <div class="category-title">Success & Project Desires</div>
                    <div class="category-description">Your career aspirations, creative projects, and professional fulfillment</div>
                </div>
                <div class="questions-grid">
                    <div class="question-card">
                        <label class="question-label">What projects or goals do I want to bring to life in the next year?</label>
                        <textarea class="question-textarea" data-category="2" data-question="0" placeholder="List specific projects, goals, or achievements you desire..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How would success in my career, business, or creative work look and feel?</label>
                        <textarea class="question-textarea" data-category="2" data-question="1" placeholder="Paint a vivid picture of your professional success..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What skills, recognition, or opportunities would delight me to experience?</label>
                        <textarea class="question-textarea" data-category="2" data-question="2" placeholder="What would make you feel proud and accomplished?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How do I want others to describe my work or contributions?</label>
                        <textarea class="question-textarea" data-category="2" data-question="3" placeholder="What legacy or impact do you want to create?"></textarea>
                    </div>
                </div>
            </div>

            <div class="category-container" id="category-3">
                <div class="category-header">
                    <div class="category-icon">💕</div>
                    <div class="category-title">Relationship Desires</div>
                    <div class="category-description">Your connections with romantic partners, family, and close friends</div>
                </div>
                <div class="questions-grid">
                    <div class="question-card">
                        <label class="question-label">How do I want to feel in my closest relationships?</label>
                        <textarea class="question-textarea" data-category="3" data-question="0" placeholder="Describe the emotional quality you desire in relationships..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What qualities do I want to experience with my partner, family, or friends?</label>
                        <textarea class="question-textarea" data-category="3" data-question="1" placeholder="What characteristics would make relationships fulfilling?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What kind of new connections would I like to attract?</label>
                        <textarea class="question-textarea" data-category="3" data-question="2" placeholder="Describe the people you'd love to have in your life..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How do I want to be supported and how do I want to support others?</label>
                        <textarea class="question-textarea" data-category="3" data-question="3" placeholder="Explore the give and take of meaningful relationships..."></textarea>
                    </div>
                </div>
            </div>

            <div class="category-container" id="category-4">
                <div class="category-header">
                    <div class="category-icon">🌟</div>
                    <div class="category-title">Social Desires</div>
                    <div class="category-description">Your community connections, social presence, and shared experiences</div>
                </div>
                <div class="questions-grid">
                    <div class="question-card">
                        <label class="question-label">What communities, groups, or circles would I love to belong to?</label>
                        <textarea class="question-textarea" data-category="4" data-question="0" placeholder="Describe communities that align with your values and interests..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How do I want to show up socially—with confidence, joy, authenticity?</label>
                        <textarea class="question-textarea" data-category="4" data-question="1" placeholder="How do you want to be perceived and feel in social settings?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What kinds of shared experiences or events would I enjoy?</label>
                        <textarea class="question-textarea" data-category="4" data-question="2" placeholder="What activities or gatherings would bring you joy?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How do I want others to feel when they are around me?</label>
                        <textarea class="question-textarea" data-category="4" data-question="3" placeholder="What energy or impact do you want to have on others?"></textarea>
                    </div>
                </div>
            </div>

            <div class="category-container" id="category-5">
                <div class="category-header">
                    <div class="category-icon">🙏</div>
                    <div class="category-title">Spiritual Desires</div>
                    <div class="category-description">Your connection to the Divine, inner wisdom, and spiritual growth</div>
                </div>
                <div class="questions-grid">
                    <div class="question-card">
                        <label class="question-label">How do I want to connect with my inner self, source, or higher power?</label>
                        <textarea class="question-textarea" data-category="5" data-question="0" placeholder="Describe your ideal spiritual connection and practices..."></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What spiritual practices (meditation, prayer, reflection) would I love to cultivate?</label>
                        <textarea class="question-textarea" data-category="5" data-question="1" placeholder="What practices would deepen your spiritual life?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">What experiences would help me feel most aligned, guided, and peaceful?</label>
                        <textarea class="question-textarea" data-category="5" data-question="2" placeholder="What brings you into spiritual alignment and peace?"></textarea>
                    </div>
                    <div class="question-card">
                        <label class="question-label">How do I want to embody gratitude, love, and presence each day?</label>
                        <textarea class="question-textarea" data-category="5" data-question="3" placeholder="How would you live as your highest spiritual self?"></textarea>
                    </div>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousCategory()" style="display: none;">
                    ← Previous
                </button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextCategory()">
                    Next →
                </button>
            </div>

            <div class="results-container" id="resultsContainer">
                <div class="results-header">
                    <h2>🌈 Your Personal Desire Map 🌈</h2>
                    <p>Congratulations! You've completed your comprehensive desire mapping. Here's your beautiful overview of what matters most to you.</p>
                </div>

                <div class="desire-summary" id="desireSummary">
                    <!-- Dynamically populated -->
                </div>

                <div class="download-section">
                    <h3 style="margin-bottom: 20px; color: #7c3aed;">Ready to Begin Your Journey?</h3>
                    <p style="margin-bottom: 30px; color: #4a5568;">Your Desire Map is the foundation for the next 7 weeks of transformation.</p>
                    <button class="download-btn" onclick="generatePDF()">
                        📄 Download Your Complete Desire Map
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const categories = [
            {
                name: "Well-Being & Body Desires",
                icon: "💫",
                questions: [
                    "How do I want to feel physically each day?",
                    "What would my ideal body, health, or energy level look like?", 
                    "What kind of daily routines, nutrition, or movement would feel nourishing and joyful to me?",
                    "How do I want to look in the mirror and feel in my clothes?"
                ]
            },
            {
                name: "Financial Desires", 
                icon: "💰",
                questions: [
                    "What amount of money would feel abundant and secure for me right now?",
                    "How would I love to earn, save, invest, or spend money?",
                    "What kinds of experiences, things, or freedoms would I love my money to provide?",
                    "How would financial flow make me feel?"
                ]
            },
            {
                name: "Success & Project Desires",
                icon: "🚀", 
                questions: [
                    "What projects or goals do I want to bring to life in the next year?",
                    "How would success in my career, business, or creative work look and feel?",
                    "What skills, recognition, or opportunities would delight me to experience?",
                    "How do I want others to describe my work or contributions?"
                ]
            },
            {
                name: "Relationship Desires",
                icon: "💕",
                questions: [
                    "How do I want to feel in my closest relationships?",
                    "What qualities do I want to experience with my partner, family, or friends?", 
                    "What kind of new connections would I like to attract?",
                    "How do I want to be supported and how do I want to support others?"
                ]
            },
            {
                name: "Social Desires",
                icon: "🌟",
                questions: [
                    "What communities, groups, or circles would I love to belong to?",
                    "How do I want to show up socially—with confidence, joy, authenticity?",
                    "What kinds of shared experiences or events would I enjoy?", 
                    "How do I want others to feel when they are around me?"
                ]
            },
            {
                name: "Spiritual Desires",
                icon: "🙏",
                questions: [
                    "How do I want to connect with my inner self, source, or higher power?",
                    "What spiritual practices (meditation, prayer, reflection) would I love to cultivate?",
                    "What experiences would help me feel most aligned, guided, and peaceful?",
                    "How do I want to embody gratitude, love, and presence each day?"
                ]
            }
        ];

        let currentCategory = -1;
        let responses = {};

        function startMapping() {
            document.getElementById('introSection').style.display = 'none';
            currentCategory = 0;
            showCategory(0);
            updateProgress();
        }

        function showCategory(index) {
            // Hide all categories
            document.querySelectorAll('.category-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Show current category
            document.getElementById(`category-${index}`).classList.add('active');
            
            // Load saved responses for this category
            loadSavedResponses(index);
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = index > 0 ? 'block' : 'none';
            nextBtn.textContent = index === categories.length - 1 ? 'Complete Journey ✨' : 'Next →';
            
            updateProgress();
            updateCompletionIndicator();
        }

        function nextCategory() {
            saveCurrentResponses();
            
            if (currentCategory < categories.length - 1) {
                currentCategory++;
                showCategory(currentCategory);
            } else {
                showResults();
            }
        }

        function previousCategory() {
            if (currentCategory > 0) {
                currentCategory--;
                showCategory(currentCategory);
            }
        }

        function saveCurrentResponses() {
            if (currentCategory >= 0) {
                const textareas = document.querySelectorAll(`#category-${currentCategory} .question-textarea`);
                if (!responses[currentCategory]) {
                    responses[currentCategory] = {};
                }
                
                textareas.forEach(textarea => {
                    const questionIndex = textarea.getAttribute('data-question');
                    responses[currentCategory][questionIndex] = textarea.value;
                });
            }
        }

        function loadSavedResponses(categoryIndex) {
            if (responses[categoryIndex]) {
                const textareas = document.querySelectorAll(`#category-${categoryIndex} .question-textarea`);
                textareas.forEach(textarea => {
                    const questionIndex = textarea.getAttribute('data-question');
                    if (responses[categoryIndex][questionIndex]) {
                        textarea.value = responses[categoryIndex][questionIndex];
                    }
                });
            }
        }

        function updateProgress() {
            const progress = currentCategory >= 0 ? ((currentCategory + 1) / categories.length) * 100 : 0;
            document.getElementById('progressFill').style.width = progress + '%';
            
            if (currentCategory >= 0) {
                document.getElementById('progressText').textContent = 
                    `${categories[currentCategory].name} (${currentCategory + 1} of ${categories.length})`;
            }
        }

        function updateCompletionIndicator() {
            const dots = document.querySelectorAll('.indicator-dot');
            dots.forEach((dot, index) => {
                dot.classList.remove('completed', 'current');
                if (index < currentCategory) {
                    dot.classList.add('completed');
                } else if (index === currentCategory) {
                    dot.classList.add('current');
                }
            });
        }

        function showResults() {
            saveCurrentResponses();
            
            // Hide all category containers
            document.querySelectorAll('.category-container').forEach(container => {
                container.style.display = 'none';
            });
            
            // Hide navigation
            document.querySelector('.navigation').style.display = 'none';
            
            // Update progress to 100%
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = 'Journey Complete! 🎉';
            
            // Show results
            document.getElementById('resultsContainer').style.display = 'block';
            
            generateSummary();
        }

        function generateSummary() {
            const summaryContainer = document.getElementById('desireSummary');
            summaryContainer.innerHTML = '';
            
            categories.forEach((category, categoryIndex) => {
                const card = document.createElement('div');
                card.className = 'summary-card';
                
                const desires = [];
                if (responses[categoryIndex]) {
                    Object.values(responses[categoryIndex]).forEach(response => {
                        if (response.trim()) {
                            // Split long responses into key points
                            const sentences = response.split(/[.!?]+/).filter(s => s.trim());
                            desires.push(...sentences.slice(0, 3).map(s => s.trim()));
                        }
                    });
                }
                
                card.innerHTML = `
                    <div class="summary-icon">${category.icon}</div>
                    <div class="summary-title">${category.name}</div>
                    <ul class="desire-list">
                        ${desires.length > 0 
                            ? desires.slice(0, 5).map(desire => `<li>${desire}</li>`).join('')
                            : '<li><em>Consider revisiting this area to explore your desires more deeply</em></li>'
                        }
                    </ul>
                `;
                
                summaryContainer.appendChild(card);
            });
        }

        function generatePDF() {
            try {
                // Create a comprehensive text summary (removing emojis for better compatibility)
                let fullSummary = "THE DESIRE FACTOR - WEEK 1 DESIRE MAP\n";
                fullSummary += "=" + "=".repeat(50) + "\n\n";
                fullSummary += "Generated on: " + new Date().toLocaleDateString() + "\n\n";
                
                const categoryNames = [
                    "WELL-BEING & BODY DESIRES",
                    "FINANCIAL DESIRES", 
                    "SUCCESS & PROJECT DESIRES",
                    "RELATIONSHIP DESIRES",
                    "SOCIAL DESIRES",
                    "SPIRITUAL DESIRES"
                ];
                
                categories.forEach((category, categoryIndex) => {
                    fullSummary += categoryNames[categoryIndex] + "\n";
                    fullSummary += "-".repeat(40) + "\n\n";
                    
                    if (responses[categoryIndex]) {
                        category.questions.forEach((question, questionIndex) => {
                            const response = responses[categoryIndex][questionIndex] || "";
                            fullSummary += `Q: ${question}\n`;
                            fullSummary += `A: ${response || "[Consider exploring this area further]"}\n\n`;
                        });
                    } else {
                        fullSummary += "Consider revisiting this category to explore your desires.\n\n";
                    }
                    
                    fullSummary += "\n";
                });
                
                fullSummary += "\nNEXT STEPS:\n";
                fullSummary += "- Review your desires daily\n";
                fullSummary += "- Notice which ones excite you most\n";
                fullSummary += "- Prepare for Week 2: The Principle of Alignment\n";
                fullSummary += "- Keep this map handy for your 8-week journey\n\n";
                
                fullSummary += "Remember: Your desires are sacred. They are calling you toward your highest expression and greatest joy.\n\n";
                fullSummary += "\"I have the Divine within me that wants to create what I desire through me. This Power is the Source of the fulfillment of each one of these desires.\"\n";
                
                // Try modern download method first
                if (navigator.msSaveBlob) {
                    // For IE/Edge
                    const blob = new Blob([fullSummary], { type: 'text/plain;charset=utf-8' });
                    navigator.msSaveBlob(blob, 'My_Desire_Factor_Map_Week1.txt');
                } else {
                    // For modern browsers
                    const blob = new Blob([fullSummary], { type: 'text/plain;charset=utf-8' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = 'My_Desire_Factor_Map_Week1.txt';
                    
                    // Add to DOM, click, then remove
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Clean up
                    setTimeout(() => {
                        window.URL.revokeObjectURL(url);
                    }, 100);
                }
                
                // Show success message
                showDownloadSuccess();
                
            } catch (error) {
                console.error('Download error:', error);
                // Fallback: show text in a new window for copy/paste
                showTextFallback();
            }
        }

        function showDownloadSuccess() {
            const btn = document.querySelector('.download-btn');
            const originalText = btn.textContent;
            btn.textContent = '✅ Download Complete!';
            btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
            }, 3000);
        }

        function showTextFallback() {
            // Create the same summary for fallback
            let fullSummary = "THE DESIRE FACTOR - WEEK 1 DESIRE MAP\n";
            fullSummary += "=" + "=".repeat(50) + "\n\n";
            fullSummary += "Generated on: " + new Date().toLocaleDateString() + "\n\n";
            
            const categoryNames = [
                "WELL-BEING & BODY DESIRES",
                "FINANCIAL DESIRES", 
                "SUCCESS & PROJECT DESIRES",
                "RELATIONSHIP DESIRES",
                "SOCIAL DESIRES",
                "SPIRITUAL DESIRES"
            ];
            
            categories.forEach((category, categoryIndex) => {
                fullSummary += categoryNames[categoryIndex] + "\n";
                fullSummary += "-".repeat(40) + "\n\n";
                
                if (responses[categoryIndex]) {
                    category.questions.forEach((question, questionIndex) => {
                        const response = responses[categoryIndex][questionIndex] || "";
                        fullSummary += `Q: ${question}\n`;
                        fullSummary += `A: ${response || "[Consider exploring this area further]"}\n\n`;
                    });
                } else {
                    fullSummary += "Consider revisiting this category to explore your desires.\n\n";
                }
                
                fullSummary += "\n";
            });
            
            fullSummary += "\nNEXT STEPS:\n";
            fullSummary += "- Review your desires daily\n";
            fullSummary += "- Notice which ones excite you most\n";
            fullSummary += "- Prepare for Week 2: The Principle of Alignment\n";
            fullSummary += "- Keep this map handy for your 8-week journey\n\n";
            
            fullSummary += "Remember: Your desires are sacred. They are calling you toward your highest expression and greatest joy.\n\n";
            fullSummary += "\"I have the Divine within me that wants to create what I desire through me. This Power is the Source of the fulfillment of each one of these desires.\"\n";
            
            // Open in new window for copy/paste
            const newWindow = window.open('', '_blank');
            newWindow.document.write(`
                <html>
                    <head>
                        <title>Your Desire Factor Map</title>
                        <style>
                            body { font-family: monospace; padding: 20px; line-height: 1.6; }
                            .copy-btn { 
                                background: #8B5CF6; 
                                color: white; 
                                border: none; 
                                padding: 10px 20px; 
                                border-radius: 5px; 
                                cursor: pointer; 
                                margin-bottom: 20px; 
                            }
                            .copy-btn:hover { background: #7C3AED; }
                            textarea { 
                                width: 100%; 
                                height: 500px; 
                                font-family: monospace; 
                                padding: 10px; 
                                border: 2px solid #8B5CF6; 
                                border-radius: 5px; 
                            }
                        </style>
                    </head>
                    <body>
                        <h2>Your Desire Factor Map</h2>
                        <p>Copy the text below and save it to your computer:</p>
                        <button class="copy-btn" onclick="copyText()">📋 Copy All Text</button>
                        <textarea id="summaryText" readonly>${fullSummary.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</textarea>
                        
                        <script>
                            function copyText() {
                                const textarea = document.getElementById('summaryText');
                                textarea.select();
                                document.execCommand('copy');
                                alert('Text copied to clipboard!');
                            }
                        </script>
                    </body>
                </html>
            `);
            newWindow.document.close();
            
            // Update button to show fallback was used
            const btn = document.querySelector('.download-btn');
            btn.textContent = '📋 Text Opened in New Window';
            btn.style.background = 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)';
        }

        // Auto-save functionality
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('question-textarea')) {
                saveCurrentResponses();
            }
        });
    </script>
</body>
</html>
